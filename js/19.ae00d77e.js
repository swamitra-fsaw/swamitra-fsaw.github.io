(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{5644:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-toolbar",{staticClass:"q-pl-lg"},[a("q-toolbar-title",{staticClass:"text-weight-bold"},[e._v("Data Peminjaman")])],1),a("q-separator"),a("q-card",{attrs:{flat:""}},[a("q-toolbar",{staticClass:"q-pl-lg"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"q-mr-sm",staticStyle:{width:"260px"},attrs:{placeholder:"Cari Data Berdasarkan Nama..."},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),a("q-btn-toggle",{staticClass:"q-mr-sm",attrs:{outline:"",size:"sm",options:e.filter_toggles},model:{value:e.active_filter,callback:function(t){e.active_filter=t},expression:"active_filter"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{size:"sm",outline:"",icon:"refresh"},on:{click:e.load_alternatives}}),a("q-space"),a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"sm",to:"/app/upload",outline:"",icon:"cloud_upload"}}),a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"sm",outline:"",icon:"print"}}),a("q-btn",{attrs:{size:"sm",unelevated:"",color:"positive",icon:"create",to:"/app/peminjaman/add"}})],1),a("q-separator"),a("q-card-section",[a("q-table",{attrs:{flat:"",columns:e.headers,data:e.items,loading:e.loading},scopedSlots:e._u([{key:"body-cell-accepted",fn:function(t){return[a("q-td",[a("strong",[e._v(e._s(t.row.accepted?"Diterima":"Ditolak"))])])]}},{key:"body-cell-action",fn:function(t){return[a("q-td",[a("q-btn",{attrs:{size:"xs",dense:"",dark:"",unelevated:"",color:"negative",icon:"remove"},on:{click:function(a){return e.show_delete_warning(t.row.id)}}}),a("q-btn",{staticClass:"q-ml-xs",attrs:{size:"xs",dense:"",unelevated:"",dark:"",color:"primary",icon:"create"},on:{click:function(a){return e.open_edit(t.row.id)}}})],1)]}}])})],1)],1),a("router-view",{on:{update:e.load_alternatives}})],1)},n=[],i=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("f751"),a("c47a")),o=a.n(i),s=a("967e"),l=a.n(s),c=(a("96cf"),a("fa84")),u=a.n(c),d=a("4db1"),p=a.n(d),f=(a("6b54"),a("06db"),a("a481"),a("780a"));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){return"Rp, ".concat(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))}var v={name:"ListPeminjaman",data:function(){return{keyword:"",active_filter:"all",filter_toggles:[{label:"Semua",value:"all"},{label:"Diterima",value:"accepted"},{label:"Ditolak",value:"rejected"}],loading:!1,items:[],base_headers:[{name:"no_anggota",label:"No. Anggota",field:"no_anggota",required:!0,align:"left"},{name:"Nama",label:"Nama",field:"nama",required:!0,align:"left"},{name:"accepted",label:"Keterangan",field:"accepted",required:!0,align:"left"}],kriteria_headers:[],kriteria:[],delete_dialog:!1,delete_id:""}},computed:{headers:function(){return[].concat(p()(this.base_headers),p()(this.kriteria_headers),[{name:"action",label:"",field:"_id",align:"right"}])}},methods:{load_kriteria:function(){var e=u()(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["b"].get("/kriteria",{params:{keyword:""}});case 2:t=e.sent,this.kriteria=t.data,t.data.forEach((function(e){var t={name:e.column_name,label:e.label,field:e.column_name,required:!0,align:"left"};"rupiah"==e.display_type&&(t.format=function(e,t){return b(e)}),a.kriteria_headers.push(t)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),load_alternatives:function(){var e=u()(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={keyword:this.keyword,accepted:this.active_filter},e.next=4,f["b"].get("/alternative",{params:t});case 4:a=e.sent,r=a.data.map((function(e){return h({id:e._id},e)})),this.items=r.map((function(e){return e.kriteria_data.forEach((function(t){var a={};a[t.column_name]=t.value,Object.assign(e,a)})),e})),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delete_alternative:function(){var e=u()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["b"].delete("/kriteria/".concat(this.delete_id));case 2:this.load_alternatives();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),show_delete_warning:function(e){this.delete_id=e,this.delete_dialog=!0},open_edit:function(e){this.$router.push("/app/peminjaman/edit/".concat(e))}},mounted:function(){var e=u()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.load_kriteria();case 2:return e.next=4,this.load_alternatives();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},g=v,_=a("2877"),w=Object(_["a"])(g,r,n,!1,null,null,null);t["default"]=w.exports}}]);